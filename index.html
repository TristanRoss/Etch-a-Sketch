<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch-a-Sketch</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="btnContainer">
        <button id="newGrid">New Grid</button>
    </div>
    <div id='container'></div>

    <script>
        
        let gridAmount = 5;
        drawGrid(gridAmount);
        const button = document.querySelector('#newGrid');
        button.addEventListener('click', (e) => {
            gridAmount = prompt('Enter new grid size: ');
            drawGrid(gridAmount);
        });

        function drawGrid(gridAmount) {
        
            const container = document.querySelector('#container');
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
            container.style.display = 'grid';
            let str = '';
            for (let i = 0; i < gridAmount; i++) {
                str +=  'auto ';
            }
            container.style.gridTemplateColumns = str;
            container.style.gridGap = '0';
            container.style.width = 500 + gridAmount * 2 + 'px';
            container.style.height = 500 + gridAmount * 2 + 'px';
            container.style.border = '1px solid white';


            for (let i = 0; i < gridAmount * gridAmount; i++) {
                let hasBeenHovered = false;
                const square = document.createElement('div');
                square.style.width = 500 / gridAmount + 'px';
                square.style.height = 500 / gridAmount + 'px';
                square.style.border = '1px solid white';
                square.style.margin = '0';
                square.style.padding = '0';
                let rgbOne = Math.floor(Math.random() * 256);
                let rgbTwo = Math.floor(Math.random() * 256);
                let rgbThree = Math.floor(Math.random() * 256);
                let rgbStr = '';
                square.addEventListener('mouseenter', (e) => {
                    if (hasBeenHovered == true) {
                        if (rgbOne == 0) {

                        } else if (rgbOne < 20) {
                            rgbOne = 0;
                        } else {
                            rgbOne -= 20;
                        }

                        if (rgbTwo == 0) {

                        } else if (rgbTwo < 20) {
                            rgbTwo = 0;
                        } else {
                            rgbTwo -= 20;
                        }

                        if (rgbThree == 0) {

                        } else if (rgbThree < 20) {
                            rgbThree = 0;
                        } else {
                            rgbThree -= 20;
                        }
                    } else {
                        hasBeenHovered = true;
                    }

                    rgbStr = 'rgb(' + rgbOne + ', ' + rgbTwo + ', ' + rgbThree + ')';
                    square.style.backgroundColor = rgbStr;
                });
                container.appendChild(square);
            }
        }

    </script>
</body>
</html>